<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card shadow">
        <div class="card-body text-center p-5">
          <h2 class="mb-4"> Autenticaci贸n TMDB</h2>

          @if (loading) {
            <div class="spinner-border text-primary mb-3" role="status">
              <span class="visually-hidden">Cargando...</span>
            </div>
            <p>Procesando autenticaci贸n...</p>
          }

          @if (errorMessage && !loading) {
            <div class="alert alert-danger" role="alert">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              {{ errorMessage }}
            </div>
            <button class="btn btn-primary mt-3" (click)="login()">
              <i class="bi bi-arrow-clockwise me-2"></i>
              Reintentar
            </button>
          }

          @if (successMessage) {
            <div class="alert alert-success" role="alert">
              <i class="bi bi-check-circle-fill me-2"></i>
              {{ successMessage }}
            </div>
            <p class="text-muted">Redirigiendo a tus listas...</p>
          }

          @if (!isAuthenticated() && !loading && !successMessage) {
            <p class="text-muted mb-4">
              Inicia sesi贸n con tu cuenta de TMDB para acceder a tus listas personalizadas
            </p>
            <button class="btn btn-primary btn-lg" (click)="login()">
              <i class="bi bi-box-arrow-in-right me-2"></i>
              Iniciar Sesi贸n con TMDB
            </button>
            <p class="text-muted mt-3 small">
              Ser谩s redirigido a la web oficial de TMDB para autorizar la aplicaci贸n
            </p>
          }

          @if (isAuthenticated() && !successMessage && !loading) {
            <div class="alert alert-success mb-4">
              <i class="bi bi-check-circle-fill me-2"></i>
              隆Sesi贸n iniciada correctamente!
              @if (getUsername()) {
                <br>
                <strong>Usuario:</strong> {{ getUsername() }}
              }
            </div>
            <div class="d-grid gap-2">
              <button class="btn btn-primary btn-lg" routerLink="/mis-listas">
                <i class="bi bi-list-ul me-2"></i>
                Ver Mis Listas
              </button>
              <button class="btn btn-outline-secondary" routerLink="/">
                <i class="bi bi-house me-2"></i>
                Ir al Inicio
              </button>
              <button class="btn btn-outline-danger" (click)="logout()">
                <i class="bi bi-box-arrow-right me-2"></i>
                Cerrar Sesi贸n
              </button>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
